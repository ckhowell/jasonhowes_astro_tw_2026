---
// ResourcesHub Component - Podcast & Blog combined

import { getCollection } from 'astro:content';

const podcastEpisodes = [
  { title: 'How "Hannah the Hunter" Achieved a Blowout Year and Breakthrough Sales Success', date: 'MARCH 4, 2025' },
  { title: 'A Big Picture Diagnostic: 5 Reasons Your Sales Team May Not Be Developing More New Business', date: 'NOVEMBER 24, 2024' },
  { title: 'Check Your Ego. Don\'t Play Hero. Prepare & Prioritize to Minimize Stress & Ensure Success', date: 'AUGUST 29, 2023' },
  { title: 'The #1 Reason Your Sales Team Is Not Bringing In More New Business', date: 'AUGUST 22, 2023' },
];

const formatDateForLabel = (isoDate: string) =>
  new Date(isoDate)
    .toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })
    .toUpperCase();

const blogPosts = (await getCollection('blog'))
  .filter((post) => Boolean(post.data.pubDate))
  .sort((a, b) => new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime())
  .slice(0, 4)
  .map((post) => ({
    title: post.data.title,
    date: formatDateForLabel(post.data.pubDate),
    href: `/blog/${post.slug}`
  }));
---

<section class="py-16 md:py-24 px-4">
  <div class="max-w-7xl mx-auto p-8 md:p-12">
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-12">

      <!-- Left Column - Phone Image -->
      <div class="lg:col-span-4 relative">

        <!-- Phone Mockup with Podcast - Glassmorphism Design -->
        <div class="relative max-w-[280px] mx-auto lg:mx-0 transform -rotate-6">
          <div class="relative rounded-[3rem] p-3 backdrop-blur-xl border border-brand-300 dark:border-brand-400 shadow-2xl">
            <!-- Inner Screen with Dark Glass Effect -->
            <div class="bg-gradient-to-br from-slate-900/90 via-slate-800/95 to-slate-900/90 rounded-[2.5rem] overflow-hidden border border-slate-900/50 shadow-inner">
              <!-- Subtle Inner Glow -->
              <div class="absolute inset-3 rounded-[2rem] bg-gradient-to-br from-accent-500/5 via-transparent to-accent-400/5 pointer-events-none"></div>

              <!-- Podcast App Screen -->
              <div class="relative aspect-[9/19] bg-gradient-to-b from-brand-200 via-brand-100 to-brand-200 p-4 flex flex-col dark:from-slate-900 dark:via-slate-800 dark:to-slate-900">
                <!-- Podcast Cover Art - Enhanced -->
                <div class="bg-gradient-to-br from-accent-600 via-accent-500 to-accent-400 rounded-lg aspect-square mb-4 flex items-center justify-center overflow-hidden shadow-lg border border-accent-400/30">
                  <div class="text-center text-brand-100 p-4 dark:text-brand-900">
                    <p class="text-xs font-bold uppercase tracking-wider text-brand-100/90 dark:text-brand-800">The</p>
                    <p class="text-sm font-bold uppercase text-brand-100 dark:text-brand-900">Sales Management</p>
                    <p class="text-xs font-bold uppercase text-brand-100/90 dark:text-brand-800">Simplified.</p>
                    <p class="text-[10px] mt-2 text-brand-100/80 dark:text-brand-800/80">Podcast</p>
                  </div>
                </div>

                <!-- Episode Info - Enhanced Contrast -->
                <div class="text-center mb-4">
                  <p class="text-[10px]  mb-1 font-medium">How a Top-Producer Prospects.</p>
                  <p class="text-xs font-semibold">The Sales Management. Simplified.</p>
                </div>

                <!-- Progress Bar - Enhanced -->
                <div class="mb-4">
                  <div class="h-1 bg-slate-700 rounded-full overflow-hidden">
                    <div class="h-1 bg-gradient-to-r from-accent-400 to-accent-500 rounded-full w-1/3 shadow-sm"></div>
                  </div>
                  <div class="flex justify-between text-[8px]  mt-1 font-mono">
                    <span>9:45</span>
                    <span>-49:57</span>
                  </div>
                </div>

                <!-- Playback Controls - Enhanced -->
                <div class="flex items-center justify-center gap-6">
                  <button class=" text-lg hover:text-brand-100 transition-colors">
                    <i class="bx bx-rewind"></i>
                  </button>
                  <button class="w-12 h-12 bg-gradient-to-br from-accent-500 to-accent-600 rounded-full flex items-center justify-center shadow-lg border border-accent-400/50 hover:shadow-accent-400/25 transition-all">
                    <i class="bx bx-play text-2xl text-brand-100"></i>
                  </button>
                  <button class="text-lg hover:text-brand-100 transition-colors">
                    <i class="bx bx-fast-forward"></i>
                  </button>
                </div>
              </div>
            </div>

            <!-- Phone Notch/Home Indicator -->
            <div class="absolute top-8 left-1/2 transform -translate-x-1/2 w-20 h-6 bg-brand-300 dark:bg-brand-900/80 rounded-b-xl border-x border-b border-slate-700/50"></div>
          </div>

          <!-- Reflection Effect -->
          <div class="absolute -bottom-4 left-4 right-4 h-8 bg-gradient-to-t from-white/5 to-transparent rounded-full blur-sm transform rotate-6"></div>
        </div>
      </div>

      <!-- Right Column - Content -->
      <div class="lg:col-span-8">
        <!-- Header -->
        <!-- <div class="mb-18">
          <h3 class="text-3xl md:text-4xl text-brand-100 mb-2">
            KEEP UP AND <span class="underline decoration-2 underline-offset-4 decoration-accent-400">STAY SHARP</span>
          </h3>
        </div> -->

        <!-- Two Column Grid for Podcast & Blog -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12">

          <!-- Podcast Column -->
          <div>
            <h4 class="resources-label text-sm uppercase tracking-[0.15em] mb-4 pb-2 border-b-2 border-brand-300 dark:border-brand-600">
              Podcast
            </h4>

            <div class="space-y-6">
              {podcastEpisodes.map((episode) => (
                <div class="group cursor-pointer">
                  <p class="font-semibold text-brand-800 dark:text-brand-200 leading-snug mb-1 group-hover:text-accent-600 dark:group-hover:text-accent-400 transition-colors">
                    {episode.title}
                  </p>
                  <p class="text-xs text-brand-500 uppercase tracking-wider">{episode.date}</p>
                </div>
              ))}
            </div>

            <a
              href="/podcast"
              class="inline-block mt-8 border-2 border-accent-600 dark:border-accent-400 text-accent-600 dark:text-accent-400 font-semibold uppercase tracking-[0.15em] text-xs py-3 px-6 rounded-full hover:bg-accent-600 dark:hover:bg-accent-400 hover:text-brand-100 dark:hover:text-brand-900 transition"
            >
              Listen Now
            </a>
          </div>

          <!-- Blog Column -->
          <div>
            <h4 class="resources-label text-sm uppercase tracking-[0.15em] mb-4 pb-2 border-b-2 border-brand-300 dark:border-brand-600">
              Blog
            </h4>

            <div class="space-y-6">
              {blogPosts.map((post) => (
                <a href={post.href} class="group block cursor-pointer" aria-label={`Read ${post.title}`}>
                  <p class="font-semibold text-brand-800 dark:text-brand-200 leading-snug mb-1 group-hover:text-accent-600 dark:group-hover:text-accent-400 transition-colors">
                    {post.title}
                  </p>
                  <p class="text-xs text-brand-500 uppercase tracking-wider">{post.date}</p>
                </a>
              ))}
            </div>

            <a
              href="/blog"
              class="inline-block mt-8 border-2 border-accent-600 dark:border-accent-400 text-accent-600 dark:text-accent-400 font-semibold uppercase tracking-[0.15em] text-xs py-3 px-6 rounded-full hover:bg-accent-600 dark:hover:bg-accent-400 hover:text-brand-100 dark:hover:text-brand-900 transition"
            >
              Read More
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .resources-label {
    color: var(--color-brand-600);
  }

  :where(.dark .resources-label) {
    color: var(--color-brand-400);
  }
</style>
