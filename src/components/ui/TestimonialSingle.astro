---
// TestimonialSingle - Oatmeal-style single centered testimonial
// Large quote with avatar and attribution

interface Props {
  quote: string;
  name: string;
  role: string;
  company?: string;
  avatar?: string;
  variant?: 'default' | 'large' | 'with-image';
  sideImage?: string;
}

const {
  quote,
  name,
  role,
  company,
  avatar,
  variant = 'default',
  sideImage
} = Astro.props;
---

<section class="py-16 md:py-24 px-4">
  <div class="max-w-7xl mx-auto">
    {variant === 'with-image' && sideImage ? (
      <!-- Two-column layout with side image -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-16 items-center">
        <div class="bg-brand-50 dark:bg-brand-900 rounded-2xl p-8 md:p-12">
          <!-- Quote mark -->
          <svg class="w-10 h-10 text-brand-300 dark:text-brand-700 mb-6" fill="currentColor" viewBox="0 0 32 32">
            <path d="M10 8c-3.3 0-6 2.7-6 6v10h10V14H6c0-2.2 1.8-4 4-4V8zm14 0c-3.3 0-6 2.7-6 6v10h10V14h-8c0-2.2 1.8-4 4-4V8z"/>
          </svg>

          <blockquote class="text-xl md:text-2xl text-brand-700 dark:text-brand-300 leading-relaxed mb-8">
            {quote}
          </blockquote>

          <!-- Attribution -->
          <div class="flex items-center gap-4">
            {avatar ? (
              <img
                src={avatar}
                alt={name}
                class="w-14 h-14 rounded-full object-cover"
              />
            ) : (
              <div class="w-14 h-14 rounded-full bg-brand-200 dark:bg-brand-800 flex items-center justify-center">
                <span class="text-xl font-medium text-brand-600 dark:text-brand-300">
                  {name.charAt(0)}
                </span>
              </div>
            )}
            <div>
              <div class="font-medium text-brand-700 dark:text-brand-100">
                {name}
              </div>
              <div class="text-sm text-brand-500 dark:text-brand-500">
                {role}{company && `, ${company}`}
              </div>
            </div>
          </div>
        </div>

        <div>
          <img
            src={sideImage}
            alt=""
            class="w-full h-auto rounded-2xl"
          />
        </div>
      </div>
    ) : (
      <!-- Centered single testimonial -->
      <div class={`max-w-4xl mx-auto text-center ${variant === 'large' ? 'py-8' : ''}`}>
        <!-- Quote mark -->
        <svg class="w-12 h-12 text-brand-300 dark:text-brand-700 mx-auto mb-8" fill="currentColor" viewBox="0 0 32 32">
          <path d="M10 8c-3.3 0-6 2.7-6 6v10h10V14H6c0-2.2 1.8-4 4-4V8zm14 0c-3.3 0-6 2.7-6 6v10h10V14h-8c0-2.2 1.8-4 4-4V8z"/>
        </svg>

        <blockquote class={`text-brand-700 dark:text-brand-300 leading-relaxed mb-8 ${variant === 'large' ? 'text-2xl md:text-3xl lg:text-4xl' : 'text-xl md:text-2xl'}`}>
          "{quote}"
        </blockquote>

        <!-- Attribution -->
        <div class="flex items-center justify-center gap-4">
          {avatar ? (
            <img
              src={avatar}
              alt={name}
              class="w-14 h-14 rounded-full object-cover"
            />
          ) : (
            <div class="w-14 h-14 rounded-full bg-brand-200 dark:bg-brand-800 flex items-center justify-center">
              <span class="text-xl font-medium text-brand-600 dark:text-brand-300">
                {name.charAt(0)}
              </span>
            </div>
          )}
          <div class="text-left">
            <div class="font-medium text-brand-700 dark:text-brand-100">
              {name}
            </div>
            <div class="text-sm text-brand-500 dark:text-brand-500">
              {role}{company && `, ${company}`}
            </div>
          </div>
        </div>
      </div>
    )}
  </div>
</section>
